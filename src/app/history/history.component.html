<div *ngIf="!patient.name">
    <app-patient-search (selectedPatient)="selectPatient($event)">
    </app-patient-search>
</div>
<p [hidden]="!patient.name" class="info">
    <span
        >{{ 'PATIENT_VISIT.SELECT.ACTIVE' | translate }}
        {{ patient.name + ' ' + patient.surname }}</span
    >
    <button
        (click)="toggleTableVisibility()"
        class="add-btn"
        mat-mini-fab
        color="primary"
    >
        <mat-icon>close</mat-icon>
    </button>
</p>
<app-empty-state
    text="EMPTY_STATE.TEXT"
    icon="storage"
    *ngIf="!emptyState"
></app-empty-state>

<div [hidden]="!patient.name" *ngIf="dataSource" class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <tr
            mat-header-row
            *matHeaderRowDef="displayedColumns; sticky: true"
        ></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>
                {{ 'VISITS_HISTORY_TABLE.DATE' | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element.createdAt | date : 'dd.MM.yyyy' }}
            </td>
        </ng-container>
        <ng-container matColumnDef="points">
            <th mat-header-cell *matHeaderCellDef>
                {{ 'VISITS_HISTORY_TABLE.POINTS' | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element.points }}
            </td>
        </ng-container>
        <ng-container matColumnDef="note">
            <th mat-header-cell *matHeaderCellDef>
                {{ 'VISITS_HISTORY_TABLE.NOTE' | translate }}
            </th>
            <td mat-cell *matCellDef="let element">
                {{ element.note }}
            </td>
        </ng-container>
    </table>
    <div class="loader-container" *ngIf="isLoadingResults">
        <mat-spinner></mat-spinner>
    </div>
</div>
